{% extends "base.html" %}

{% block title %}Tambah Laporan - BAP SIMRS{% endblock %}
{% block page_title %}‚ûï Tambah Laporan{% endblock %}

{% block content %}
<div class="content-panel">
    <div class="panel-header">
        <span>üìù</span>
        Input Laporan Kesalahan SIMRS
    </div>
    <div class="panel-content">
        <form method="post" enctype="multipart/form-data" novalidate>
            {{ form.hidden_tag() }}

            <div class="form-group">
                {{ form.unit.label(class="form-label") }}
                <span style="color: var(--danger-color);">*</span>
                {{ form.unit(class="form-input", placeholder="Contoh: IGD, Rawat Inap, Farmasi") }}
                {% if form.unit.errors %}
                {% for error in form.unit.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.pelapor.label(class="form-label") }}
                <span style="color: var(--danger-color);">*</span>
                {{ form.pelapor(class="form-input", placeholder="Nama lengkap pelapor") }}
                {% if form.pelapor.errors %}
                {% for error in form.pelapor.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.modul_simrs.label(class="form-label") }}
                {{ form.modul_simrs(class="form-input", placeholder="Contoh: Pendaftaran, Billing, Rekam Medis") }}
                {% if form.modul_simrs.errors %}
                {% for error in form.modul_simrs.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.jenis_kesalahan.label(class="form-label") }}
                <span style="color: var(--danger-color);">*</span>
                {{ form.jenis_kesalahan(class="form-select") }}
                {% if form.jenis_kesalahan.errors %}
                {% for error in form.jenis_kesalahan.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.tgl_kejadian.label(class="form-label") }}
                <span style="color: var(--danger-color);">*</span>
                {{ form.tgl_kejadian(class="form-input") }}
                {% if form.tgl_kejadian.errors %}
                {% for error in form.tgl_kejadian.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.deskripsi.label(class="form-label") }}
                <span style="color: var(--danger-color);">*</span>
                {{ form.deskripsi(class="form-textarea", placeholder="Jelaskan detail kesalahan yang terjadi,
                langkah-langkah yang dilakukan, dan dampak yang ditimbulkan...") }}
                {% if form.deskripsi.errors %}
                {% for error in form.deskripsi.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.bukti_file.label(class="form-label") }}
                {{ form.bukti_file(class="form-input") }}
                <div
                    style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; padding: 0.75rem; background: var(--surface-hover); border-radius: var(--radius-sm);">
                    <strong>üìé Info File:</strong><br>
                    ‚Ä¢ Format: txt, pdf, png, jpg, jpeg, gif, doc, docx, xls, xlsx<br>
                    ‚Ä¢ Ukuran maksimal: 16MB<br>
                    ‚Ä¢ Lampirkan screenshot atau dokumen pendukung
                </div>
                {% if form.bukti_file.errors %}
                {% for error in form.bukti_file.errors %}
                <div style="color: var(--danger-color); font-size: 0.75rem; margin-top: 0.25rem;">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <button type="submit" class="btn btn-primary">
                    <span>üíæ</span> Simpan Laporan
                </button>
                <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">
                    <span>‚ùå</span> Batal
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}